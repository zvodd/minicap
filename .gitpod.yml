# This configuration file was automatically generated by Gitpod.
# Please adjust to your needs (see https://www.gitpod.io/docs/config-gitpod-file)
# and commit this file to your remote git repository to share the goodness with others.

tasks:
  - before: |
      pushd /workspace/
      wget "https://dl.google.com/android/repository/commandlinetools-linux-8512546_latest.zip"
      unzip commandlinetools-linux-8512546_latest.zip
      rm commandlinetools-linux-8512546_latest.zip
      export ANDROID_SDK_ROOT=/workspace/cmdline-tools
      export PATH="$PATH:$ANDROID_SDK_ROOT/bin"
      popd
      yes | sdkmanager --sdk_root=$ANDROID_SDK_ROOT "ndk;23.2.8568313"
      gp sync-done before
  - name: build
    init: gp sync-await before
    command: |
          export ANDROID_SDK_ROOT=/workspace/cmdline-tools
          export PATH="$PATH:$ANDROID_SDK_ROOT/bin"
          export PATH="$PATH:$ANDROID_SDK_ROOT/ndk/23.2.8568313"
          make
